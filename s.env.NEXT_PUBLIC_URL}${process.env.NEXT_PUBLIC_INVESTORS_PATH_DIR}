[1mdiff --cc src/app/api/admin/Aboutus/awardsCMS/route.js[m
[1mindex 21a2ec7,b71175c..0000000[m
[1m--- a/src/app/api/admin/Aboutus/awardsCMS/route.js[m
[1m+++ b/src/app/api/admin/Aboutus/awardsCMS/route.js[m
[36m@@@ -59,11 -61,16 +61,23 @@@[m [masync function saveAwardOrCertificate(f[m
  [m
      if (file && file.size > 0) {[m
        const buffer = Buffer.from(await file.arrayBuffer());[m
[32m++<<<<<<< HEAD[m
[32m +      const filename = file.name;[m
[32m +      const filepath = `./public${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_ABOUT_PATH_DIR}${filename}`[m
[32m +      await writeFile(filepath, buffer);[m
[32m +      image_url = `/${filename}`;[m
[32m++=======[m
[32m+       const filepath = "/var/www/uploads/uploads/Aboutus";[m
[32m+       try {[m
[32m+         await fs.access(filepath);[m
[32m+       } catch {[m
[32m+         await fs.mkdir(filepath, { recursive: true });[m
[32m+       }[m
[32m+     await fs.writeFile(filepath, buffer);[m
[32m+ [m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
      }[m
[32m+     image_url = `${file.name}`;[m
  [m
      if (action === 'ADD') {[m
        const insertQuery = `[m
[1mdiff --cc src/app/api/admin/Aboutus/infraCMS/route.js[m
[1mindex 6c19072,4eb5d88..0000000[m
[1m--- a/src/app/api/admin/Aboutus/infraCMS/route.js[m
[1m+++ b/src/app/api/admin/Aboutus/infraCMS/route.js[m
[36m@@@ -54,7 -54,12 +54,16 @@@[m [masync function addInfrastructureData(fo[m
          try{[m
          const bytes = await image.arrayBuffer();[m
          const buffer = Buffer.from(bytes);[m
[32m++<<<<<<< HEAD[m
[32m +        const path = `.${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_ABOUT_PATH_DIR}${image.name}`;[m
[32m++=======[m
[32m+         const path = "/var/www/uploads/uploads/Aboutus";[m
[32m+         try {[m
[32m+           await fs.access(path);[m
[32m+         } catch {[m
[32m+           await fs.mkdir(path, { recursive: true });[m
[32m+         }[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
          imagePath = image.name;[m
          await writeFile(path, buffer);[m
          } catch (error) {[m
[36m@@@ -87,9 -92,17 +96,21 @@@[m
          try{[m
          const bytes = await image.arrayBuffer();[m
          const buffer = Buffer.from(bytes);[m
[32m++<<<<<<< HEAD[m
[32m +        const path = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_ABOUT_PATH_DIR}${image.name}`;[m
[32m++=======[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
          imagePath = image.name;[m
[32m+         const path = "/var/www/uploads/uploads/Aboutus";[m
[32m+         try {[m
[32m+           await fs.access(path);[m
[32m+         } catch {[m
[32m+           await fs.mkdir(path, { recursive: true });[m
[32m+         }[m
          await writeFile(path, buffer);[m
[32m+ [m
[32m+ [m
[32m+ [m
          } catch (error) {[m
            console.error('Error in writing image file:', error);[m
            return NextResponse.json({ status: 500, message: "Unable to add image", error: error.message }, { status: 500 });[m
[1mdiff --cc src/app/api/admin/Investors/Transactions/route.js[m
[1mindex 7bd5c89,a8cccc9..0000000[m
[1m--- a/src/app/api/admin/Investors/Transactions/route.js[m
[1m+++ b/src/app/api/admin/Investors/Transactions/route.js[m
[36m@@@ -47,8 -48,13 +48,17 @@@[m [mexport async function POST(request) [m
      return new Response(JSON.stringify({ error: 'No file uploaded' }), { status: 400 });[m
    }[m
    try {[m
[32m+     const pdfPath = "/var/www/uploads/uploads/investors";[m
[32m+     try {[m
[32m+       await fs.access(pdfPath);[m
[32m+     } catch {[m
[32m+       await fs.mkdir(pdfPath, { recursive: true });[m
[32m+     }[m
      await uploadFile(file); [m
[32m++<<<<<<< HEAD[m
[32m +    const pdfPath = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_INVESTORS_PATH_DIR}${file.name}`;[m
[32m++=======[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
      const result = await query({[m
        query: "INSERT INTO rp_transaction (document, url) VALUES (?, ?)",[m
        values: [document, pdfPath],[m
[36m@@@ -87,8 -93,13 +97,17 @@@[m [mexport async function PUT(request, { pa[m
    const id = formData.get('id');[m
    let url;[m
    if (file) {[m
[32m+     const pdfPath = "/var/www/uploads/uploads/investors";[m
[32m+     try {[m
[32m+       await fs.access(pdfPath);[m
[32m+     } catch {[m
[32m+       await fs.mkdir(pdfPath, { recursive: true });[m
[32m+     }[m
      await uploadFile(file); [m
[32m++<<<<<<< HEAD[m
[32m +    url = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_INVESTORS_PATH_DIR}${file.name}`;[m
[32m++=======[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
  [m
      // Delete old file if it exists[m
      const oldTransaction = await query({[m
[1mdiff --cc src/app/api/admin/Investors/ldCMS/route.js[m
[1mindex 4602d46,8ba6546..0000000[m
[1m--- a/src/app/api/admin/Investors/ldCMS/route.js[m
[1m+++ b/src/app/api/admin/Investors/ldCMS/route.js[m
[36m@@@ -81,9 -83,17 +83,22 @@@[m [mexport async function POST(request) [m
      const quarter = formData.get('quarter');[m
      const document_type = formData.get('document_type');[m
      const file = formData.get('file');[m
[32m+ [m
[32m+ [m
[32m+     const pdfPath = "/var/www/uploads/uploads/investors";[m
[32m+ [m
[32m+     // Check if the directory exists, if not, create it[m
[32m+     try {[m
[32m+       await fs.access(pdfPath);[m
[32m+     } catch {[m
[32m+       await fs.mkdir(pdfPath, { recursive: true });[m
[32m+     }[m
      await uploadFile(file); [m
[32m++<<<<<<< HEAD[m
[32m +    const pdfPath = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_INVESTORS_PATH_DIR}${file.name}`;[m
[32m +    [m
[32m++=======[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
      const result = await query({[m
        query: "INSERT INTO disclosures (year, quarter, document_type, document_url) VALUES (?, ?, ?, ?)",[m
        values: [year, quarter, document_type, pdfPath],[m
[36m@@@ -116,8 -126,15 +131,19 @@@[m [mexport async function PUT(request) [m
      const file = formData.get('file');[m
  [m
     if(file){[m
[32m+ [m
[32m+     const pdfPath = "/var/www/uploads/uploads/investors";[m
[32m+     // Check if the directory exists, if not, create it[m
[32m+     try {[m
[32m+       await fs.access(pdfPath);[m
[32m+     } catch {[m
[32m+       await fs.mkdir(pdfPath, { recursive: true });[m
[32m+     }[m
      await uploadFile(file); [m
[32m++<<<<<<< HEAD[m
[32m +    const pdfPath = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_INVESTORS_PATH_DIR}${file.name}`;[m
[32m++=======[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
      await query({[m
        query: "UPDATE disclosures SET year = ?, quarter = ?, document_type = ?, document_url = ? WHERE id = ?",[m
        values: [year, quarter, document_type, pdfPath, id],[m
[1mdiff --cc src/app/api/admin/promotors/route.js[m
[1mindex b2999dc,610d641..0000000[m
[1m--- a/src/app/api/admin/promotors/route.js[m
[1m+++ b/src/app/api/admin/promotors/route.js[m
[36m@@@ -54,10 -55,13 +55,20 @@@[m [masync function saveTeamMember(formData[m
  [m
      let image_url = '';[m
      if (image) {[m
[32m++<<<<<<< HEAD[m
[32m +      const filename = `${Date.now()}-${image.name}`;[m
[32m +      const uploadPath = path.join(process.cwd(), 'public', 'Assets', 'uploads', 'Aboutus', filename);[m
[32m +      await writeFile(uploadPath, Buffer.from(await image.arrayBuffer()));[m
[32m +      image_url = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_ABOUT_PATH_DIR}${filename}`;[m
[32m++=======[m
[32m+        image_url = "/var/www/uploads/uploads/Aboutus";[m
[32m+       try {[m
[32m+         await fs.access(image_url);[m
[32m+       } catch {[m
[32m+         await fs.mkdir(image_url, { recursive: true });[m
[32m+       }[m
[32m+       await writeFile(image_url, Buffer.from(await image.arrayBuffer()));[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
      }[m
  [m
      let sql, values;[m
[1mdiff --cc src/app/api/adminCategories/route.js[m
[1mindex ee063dc,11a873c..0000000[m
[1m--- a/src/app/api/adminCategories/route.js[m
[1m+++ b/src/app/api/adminCategories/route.js[m
[36m@@@ -18,9 -20,14 +20,19 @@@[m [mexport async function POST(request) [m
        try {[m
          const bytes = await image.arrayBuffer();[m
          const buffer = Buffer.from(bytes);[m
[32m++<<<<<<< HEAD[m
[32m +    [m
[32m +        const path = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_BANNERS_PATH_DIR}${image.name}`;[m
[32m++=======[m
[32m+         const path = `${process.env.NEXT_PUBLIC_EXTERNAL_PATH_DIR}${process.env.NEXT_PUBLIC_BANNERS_PATH_DIR}`;[m
[32m+         try {[m
[32m+           await fs.access(path);[m
[32m+         } catch {[m
[32m+           await fs.mkdir(path, { recursive: true });[m
[32m+         }[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
          await writeFile(path, buffer);[m
[32m+ [m
        } catch (uploadError) {[m
          return new Response([m
            JSON.stringify({ success: false, error: uploadError.message }),[m
[36m@@@ -91,7 -97,12 +103,16 @@@[m [mexport async function PUT(request) [m
          const bytes = await image.arrayBuffer();[m
          const buffer = Buffer.from(bytes);[m
      [m
[32m++<<<<<<< HEAD[m
[32m +        const path = `${process.env.NEXT_PUBLIC_URL}${process.env.NEXT_PUBLIC_BANNERS_PATH_DIR}${image.name}`;[m
[32m++=======[m
[32m+         const path = `${process.env.NEXT_PUBLIC_EXTERNAL_PATH_DIR}${process.env.NEXT_PUBLIC_BANNERS_PATH_DIR}`;[m
[32m+         try {[m
[32m+           await fs.access(path);[m
[32m+         } catch {[m
[32m+           await fs.mkdir(path, { recursive: true });[m
[32m+         }[m
[32m++>>>>>>> 413e5157fee136df4e5e533504da121b53fd1b5d[m
          await writeFile(path, buffer);[m
        } catch (uploadError) {[m
          return new Response([m
* Unmerged path src-old/app/api/admin/Aboutus/awardsCMS/route.js
* Unmerged path src-old/app/api/admin/Aboutus/infraCMS/route.js
* Unmerged path src-old/app/api/admin/Investors/Transactions/route.js
* Unmerged path src-old/app/api/admin/Investors/ldCMS/route.js
* Unmerged path src-old/app/api/admin/promotors/route.js
* Unmerged path src-old/app/api/adminCategories/route.js
* Unmerged path src-old/app/api/adminProducts/route.js
* Unmerged path src-old/app/api/basicInfo/route.js
* Unmerged path src-old/app/api/boardOutcome/route.js
* Unmerged path src-old/app/api/heroBanners/route.js
* Unmerged path src-old/app/api/investorKYC/route.js
* Unmerged path src-old/app/api/news_media/route.js
* Unmerged path src-old/app/api/sendEmail/route.js
* Unmerged path src-old/utils/fileUploader.js
(base is not a valid attribute name: .gitattributes:10
(base is not a valid attribute name: .gitattributes:10
